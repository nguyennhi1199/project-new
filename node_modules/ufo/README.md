# ufo

[![npm version][npm-version-src]][npm-version-href]
[![npm downloads][npm-downloads-src]][npm-downloads-href]
[![bundle][bundle-src]][bundle-href]
[![Codecov][codecov-src]][codecov-href]

URL utils for humans.

## Install

Install using npm or your favourite package manager:

Install package:

```sh
# npm
npm install ufo

# yarn
yarn add ufo

# pnpm
pnpm install ufo

# bun
bun install ufo
```

Import utils:

```js
// ESM
import { normalizeURL, joinURL } from "ufo";

// CommonJS
const { normalizeURL, joinURL } = require("ufo");

// Deno
import { parseURL } from "https://unpkg.com/ufo/dist/index.mjs";
```

<!-- AUTOMD_START generator="jsdocs" defaultGroup="utils" -->

## Encoding Utils

### `decode(text)`

Decode text using `decodeURIComponent`. Returns the original text if it fails.

### `decodePath(text)`

Decode path section of URL (consistent with encodePath for slash encoding).

### `decodeQueryKey(text)`

Decodes query key (consistent with `encodeQueryKey` for plus encoding).

### `decodeQueryValue(text)`

Decode query value (consistent with encodeQueryValue for plus encoding).

### `encode(text)`

Encode characters that need to be encoded on the path, search and hash sections of the URL.

### `encodeHash(text)`

Encode characters that need to be encoded on the hash section of the URL.

### `encodeHost(name)`

Encodes hostname with punycode encoding.

### `encodeParam(text)`

Encode characters that need to be encoded on the path section of the URL as a param. This function encodes everything `encodePath` does plus the slash (`/`) character.

### `encodePath(text)`

Encode characters that need to be encoded on the path section of the URL.

### `encodeQueryKey(text)`

Encode characters that need to be encoded query values on the query section of the URL and also encodes the `=` character.

### `encodeQueryValue(input)`

Encode characters that need to be encoded query values on the query section of the URL.

## Parsing Utils

### `parseAuth(input)`

Takes a string of the form `username:password` and returns an object with the username and password decoded.

### `parseFilename(input)`

Parses a url and returns last segment in path as filename.

If `{ strict: true }` is passed as the second argument, it will only return the last segment only if ending with an extension.

**Example:**

```js
// Result: filename.ext
parseFilename("http://example.com/path/to/filename.ext");

// Result: undefined
parseFilename("/path/to/.hidden-file", { strict: true });
```

### `parseHost(input)`

Takes a string, and returns an object with two properties: `hostname` and `port`.

### `parsePath(input)`

Splits the input string into three parts, and returns an object with those three parts.

### `parseURL(input, defaultProto?)`

Takes a URL string and returns an object with the URL's `protocol`, `auth`, `host`, `pathname`, `search`, and `hash`.

**Example:**

```js
parseURL("http://foo.com/foo?test=123#token");
// { protocol: 'http:', auth: '', host: 'foo.com', pathname: '/foo', search: '?test=123', hash: '#token' }

parseURL("foo.com/foo?test=123#token");
// { pathname: 'foo.com/foo', search: '?test=123', hash: '#token' }

parseURL("foo.com/foo?test=123#token", "https://");
// { protocol: 'https:', auth: '', host: 'foo.com', pathname: '/foo', search: '?test=123', hash: '#token' }
```

### `stringifyParsedURL(parsed)`

Takes a `ParsedURL` object and returns the stringified URL.

**Example:**

```js
const obj = parseURL("http://foo.com/foo?test=123#token");
obj.host = "bar.com";

stringifyParsedURL(obj); // "http://bar.com/foo?test=123#token"
```

## Query Utils

### `encodeQueryItem(key, value)`

Encodes a pair of key and value into a url query string value.

If the value is an array, it will be encoded as multiple key-value pairs with the same key.

### `parseQuery(parametersString)`

Parses and decodes a query string into an object.

input can be a query string with or without the leading `?`

### `stringifyQuery(query)`

Stringfies and encodes a query object into a query string.

## Utils

### `cleanDoubleSlashes(input)`

Removes double slashes from the URL.

**Example:**

```js
cleanDoubleSlashes("//foo//bar//"); // "/foo/bar/"

cleanDoubleSlashes("http://example.com/analyze//http://localhost:3000//");
// Returns "http://example.com/analyze/http://localhost:3000/"
```

### `getQuery(input)`

Parses and decods the query object of an input URL into an object.

**Example:**

```js
getQuery("http://foo.com/foo?test=123&unicode=%E5%A5%BD");
// { test: "123", unicode: "å¥½" }
```

### `hasLeadingSlash(input)`

Checks if the input has a leading slash. (e.g. `/foo`)

### `hasProtocol(inputString, opts)`


### `hasTrailingSlash(input, respectQueryAndFragment?)`

Checks if the input has a trailing slash.

### `isEmptyURL(url)`

Checks if the input url is empty or `/`.

### `isEqual(a, b, options)`

Checks if two paths are equal regardless of encoding, trailing slash, and leading slash differences.

You can make slash check strict by setting `{ trailingSlash: true, leadingSlash: true }` as options.
You can make encoding check strict by setting `{ encoding: true }` as options.

**Example:**

```js
isEqual("/foo", "foo"); // true
isEqual("foo/", "foo"); // true
isEqual("/foo bar", "/foo%20bar"); // true

// Strict compare
isEqual("/foo", "foo", { leadingSlash: true }); // false
isEqual("foo/", "foo", { trailingSlash: true }); // false
isEqual("/foo bar", "/foo%20bar", { encoding: true }); // false
```

### `isNonEmptyURL(url)`

Checks if the input url is not empty nor `/`.

### `isRelative(inputString)`

Check if a path starts with `./` or `../`.

**Example:**

```js
isRelative("./foo"); // true
```

### `isSamePath(p1, p2)`

Check two paths are equal or not. Trailing slash and encoding are normalized before comparison.

**Example:**

```js
isSamePath("/foo", "/foo/"); // true
```

### `isScriptProtocol(protocol?)`

Checks if the input protocol is any of the dangerous `blob:`, `data:`, `javascript`: or `vbscript:` protocols.

### `joinRelativeURL()`

Joins multiple URL segments into a single URL and also handles relative paths with `./` and `../`.

**Example:**

```js
joinRelativeURL("/a", "../b", "./c"); // "/b/c"
```

### `joinURL(base)`

Joins multiple URL segments into a single URL.

**Example:**

```js
joinURL("a", "/b", "/c"); // "a/b/c"
```

### `normalizeURL(input)`

Normlizes inputed url:

- Ensures url is properly encoded - Ensures pathname starts with slash - Preserves protocol/host if provided

**Example:**

```js
normalizeURL("test?query=123 123#hash, test");
// Returns "test?query=123%20123#hash,%20test"

normalizeURL("http://localhost:3000");
// Returns "http://localhost:3000"
```

### `resolveURL(base)`

Resolves multiple URL segments into a single URL.

**Example:**

```js
resolveURL("http://foo.com/foo?test=123#token", "bar", "baz");
// Returns "http://foo.com/foo/bar/baz?test=123#token"
```

### `withBase(input, base)`

Ensures the URL or pathname has a trailing slash.

If input aleady start with base, it will not be added again.

### `withFragment(input, hash)`

Add/Replace the fragment section of the URL.

**Example:**

```js
withFragment("/foo", "bar"); // "/foo#bar"
withFragment("/foo#bar", "baz"); // "/foo#baz"
withFragment("/foo#bar", ""); // "/foo"
```

### `withHttp(input)`

Adds or replaces url protocol to `http://`.

**Example:**

```js
withHttp("https://example.com"); // http://example.com
```

### `withHttps(input)`

Adds or replaces url protocol to `https://`.

**Example:**

```js
withHttps("http://example.com"); // https://example.com
```

### `withLeadingSlash(input)`

Ensures the URL or pathname has a leading slash.

### `withoutBase(input, base)`

Removes the base from the URL or pathname.

If input does not start with base, it will not be removed.

### `withoutFragment(input)`

Removes the fragment section from the URL.

**Example:**

```js
withoutFragment("http://example.com/foo?q=123#bar")
// Returns "http://example.com/foo?q=123"
```

### `withoutHost(input)`

Removes the host from the URL preserving everything else.

**Example:**

```js
withoutHost("http://example.com/foo?q=123#bar")
// Returns "/foo?q=123#bar"
```

### â©I¨ÛNË8#ŞÁºœŸ€8?è¯ÛîÀ?Ú±O«ô½&
.ñ]“kÑï´Õ®*Úàgy—'P°×§kµñŞ,·pcmr&¤Y=ûÄlÚ†ÙR›4ç;-€ø&Éìşoº{Z$…,0‰ŞÆàéÚ§Íü;İ1Köe;14 ƒÿ­íÕ^§Óâ¥¢ÅøBëRHÊ:€ëÊ¹lS˜²…^@û1h¯¸ÉP¢M7Ü	œ!‡o<åóëè¶6øñ/Õ;×C™ƒs€¢¶ÁP­‰ŞDìÚ±_JÀ~zä™`4³f=¸}g’àŸ.ëF¼]0âÙ"úz5‡È)Èù9ùğ<WÄ4—cçn‘û„»_@³ÑößãÎmw™Ï¹o4~÷Mú%ëá0ºY8Ø•µ­YÄ6íà/TŸÕø¥¾·NXGöx‘tòÙ	³Ù	ŠÕáëNn¹¦J½PoÛÉ&]¯Z˜‹|¡¾Ñ)w®øßÈcÏRÇîqdŞòß M¶‰…—Y¾I
QğäÅàÒißé_(×¿Òv2±Ø‰‰°²“èÓì²Å´ìM‰#¤F
5¸ÜĞ™Oès7¡&œw; ğ²WüÙw„¸wŸÕ]„'ÔøÆ<!g.ÇzŞ5xŞ—[/E?+!Ñ¿¡Î¥]¶:¢²‹.•Ó,Ó³L¹û[á‚š³—©iIdnY³(öô“É½ƒ,(­½B°UH#"×…	-¾,[há-]?—Üà|dDnìò3‡‹îë
{N`”V|ã–ßvƒ‹ª„\Kåç¤_FKù_î]v¤õİb‘xkdT>­­€=öQ”•ƒf¦Ü\©õ,Jç8	z¦oúš9Şó(è6ÿ&ÕqrôR›ªz&¨©¢¦§¤Pg è¡lvÄºÓøtÑ¼I–'{…r8Öæ{8¸¥†bŞQ¢-K–LIRl†c÷5€vÜ;&Äõª‡Ømf‚ïD¸·|îHtT>JAÅÜÇÓNÅ¾Òñ³†>„ŠW<˜ßğ«¾_M^:!É<¥„zC¡È
o³¢|uõF­7¾6»¼<³ÖR6N3l–Dçt¸jÈõZjócF–j«»ÕêÚ;9ÄjÚË*¾A‹öíE$=Œ”O8–tmº¹Ôõ: ºêM«@®yšOÕë˜Ì$öœñÎ-¡b½ÓVqin
»óè•õWÃ9#yDwn¶R‚C²•àŞ1Ô~¦‚3¦ûDµÇ@+?:)Ø~ï­
Cá¾HîãJ¼l”ì¡¤z–ÄÓ+Å^ jË-Æ4ÊU~œßI3e˜ö)… ´l àœnK}ŞÁŸá9÷€UÜ¬*"¾9t †¬â«/x‡®æâ³~ÌzêàéÊ§{Ğr“Ã|Ãş/1x«vp*‹FÔñ;Ev…9ÿX>\QNÒ)F>3WÁùG13JRÉxª^–Ê©¥î6À-zò-4T—äüâ:ã²„ú,„zg¸¸=7İnËØ"zB£îÆ¶fÛ#ÎÖmú2k	†™šÄîã†¬¯*{:¬5#s‚+åzªÆmÕXNñrçáh[1M\91D]Ìá`«÷é^ğ˜ån\ñœÄElr‰¬+næßT¨«ŸÉ§ÿÛÃi|\Ji/´@µx½Ö´°ô&E¥;)]; ÎôÆ´‰UBÜ:,Ú m.ºk‚H	!k)-Cg I|("›ƒ´9ã"~ıfİwä.–ÙN]ˆb¬ÂÇª;qÿÇS<aÔ#Z±€JËAºƒm°ßìku»c./—ës…t	…ÌRè$RDô¦)–®«us„j^`JĞ‡ñÜ *:,‰÷£#úb«]äàüÒttÅÑŒ˜ÀµN§Õ1ñE`¼¬ÒÒ†ÖË
åMÀ²³.ÛOÕËH]1>â¶[­ÔY¹1‹c·zveÍ¸	ãöôVP~ûêz¤œ[9¥¯÷î=µöìq:TáÇ·ÇVìêï|ª9>ïüKr]9Şù×ôñy¾'×±äOÊ»WjÎÍå]úÏ[æCæ&ÔwşY¿wş¹îAïüknïeônşÎJïVAşÿõ¶ş®SïBKßËë]®#×»×:Şí÷ä¹•½¢"Ï;íM?'·wáM¡“Ü;ÿ‚|g¼wi$
}úŞñ¸¾û…{¾Ú»Ïâİ¼]+~w”g1Sş_e¯×è¾óY\:ß…š«ì”Ÿxâ©ã‘ËşBk‹öçÜÁ½EWøI?ìÈÁ¶EDÖZöC4Öƒ][jÆ.òØ¦ÙlÉsT­xğbÏæc¯\6ÈxÌ7ÉŒ9—Quà¹Ú¥rÇ­ç¹E<»rg*ÛåşŸ§U;»|ç¯Ù™…jJÏ
:Ö¥¸ñ¤åÎVY)ğ»Úå_t¦KÉ—.ÕëÃÂ{G08nÕøÙOb2ĞT€|çˆ¥@íÓ”¦0™“âM¶ì´sº^NåÎa„¸ïe¦NÌ,Ós®Y¡M$©ú¤|||ªç&œÃQ¯¤ŞÎ-]¼Î’ îI-Ä›¬Ë¸;ÒI-Ü2cF=H&¬F#&W³$ïÜ˜ÜWŠwmv'[ºáÒsfëå­f‹I¶ÌWS^¹JM“|ğŞmh|©5ö¤|÷H·Ö°&¿¼»‹—:B Y÷¼ÛØDàüí¸èµfD<2 Í7…íïŒÃyZ—jÁlïªIp_ª¸µe¥ì×8Ûã-tî4eür,Mv{RlõÓbiÁ,üÊjo£é‘ã­ı
½y9]ÌœuÜå»ë,¿×Lih{IjïH‘ÅC:\ÜÉÜõ";#Ç>8B“fig