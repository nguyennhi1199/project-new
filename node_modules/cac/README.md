<img width="945" alt="2017-07-26 9 27 05" src="https://user-images.githubusercontent.com/8784712/28623641-373450f4-7249-11e7-854d-1b076dab274d.png">

[![NPM version](https://img.shields.io/npm/v/cac.svg?style=flat)](https://npmjs.com/package/cac) [![NPM downloads](https://img.shields.io/npm/dm/cac.svg?style=flat)](https://npmjs.com/package/cac) [![CircleCI](https://circleci.com/gh/cacjs/cac/tree/master.svg?style=shield)](https://circleci.com/gh/cacjs/cac/tree/master) [![Codecov](https://badgen.net/codecov/c/github/cacjs/cac/master)](https://codecov.io/gh/cacjs/cac) [![donate](https://img.shields.io/badge/$-donate-ff69b4.svg?maxAge=2592000&style=flat)](https://github.com/egoist/donate) [![chat](https://img.shields.io/badge/chat-on%20discord-7289DA.svg?style=flat)](https://chat.egoist.moe) [![install size](https://badgen.net/packagephobia/install/cac)](https://packagephobia.now.sh/result?p=cac)

## Introduction

**C**ommand **A**nd **C**onquer is a JavaScript library for building CLI apps.

## Features

- **Super light-weight**: No dependency, just a single file.
- **Easy to learn**. There're only 4 APIs you need to learn for building simple CLIs: `cli.option` `cli.version` `cli.help` `cli.parse`.
- **Yet so powerful**. Enable features like default command, git-like subcommands, validation for required arguments and options, variadic arguments, dot-nested options, automated help message generation and so on.
- **Developer friendly**. Written in TypeScript.

## Table of Contents

<!-- toc -->

- [Install](#install)
- [Usage](#usage)
  - [Simple Parsing](#simple-parsing)
  - [Display Help Message and Version](#display-help-message-and-version)
  - [Command-specific Options](#command-specific-options)
  - [Dash in option names](#dash-in-option-names)
  - [Brackets](#brackets)
  - [Negated Options](#negated-options)
  - [Variadic Arguments](#variadic-arguments)
  - [Dot-nested Options](#dot-nested-options)
  - [Default Command](#default-command)
  - [Supply an array as option value](#supply-an-array-as-option-value)
  - [Error Handling](#error-handling)
  - [With TypeScript](#with-typescript)
  - [With Deno](#with-deno)
- [Projects Using CAC](#projects-using-cac)
- [References](#references)
  - [CLI Instance](#cli-instance)
    - [cac(name?)](#cacname)
    - [cli.command(name, description, config?)](#clicommandname-description-config)
    - [cli.option(name, description, config?)](#clioptionname-description-config)
    - [cli.parse(argv?)](#cliparseargv)
    - [cli.version(version, customFlags?)](#cliversionversion-customflags)
    - [cli.help(callback?)](#clihelpcallback)
    - [cli.outputHelp()](#clioutputhelp)
    - [cli.usage(text)](#cliusagetext)
  - [Command Instance](#command-instance)
    - [command.option()](#commandoption)
    - [command.action(callback)](#commandactioncallback)
    - [command.alias(name)](#commandaliasname)
    - [command.allowUnknownOptions()](#commandallowunknownoptions)
    - [command.example(example)](#commandexampleexample)
    - [command.usage(text)](#commandusagetext)
  - [Events](#events)
- [FAQ](#faq)
  - [How is the name written and pronounced?](#how-is-the-name-written-and-pronounced)
  - [Why not use Commander.js?](#why-not-use-commanderjs)
- [Project Stats](#project-stats)
- [Contributing](#contributing)
- [Author](#author)

<!-- tocstop -->

## Install

```bash
yarn add cac
```

## Usage

### Simple Parsing

Use CAC as simple argument parser:

```js
// examples/basic-usage.js
const cli = require('cac')()

cli.option('--type <type>', 'Choose a project type', {
  default: 'node',
})

const parsed = cli.parse()

console.log(JSON.stringify(parsed, null, 2))
```

<img width="500" alt="2018-11-26 12 28 03" src="https://user-images.githubusercontent.com/8784712/48981576-2a871000-f112-11e8-8151-80f61e9b9908.png">

### Display Help Message and Version

```js
// examples/help.js
const cli = require('cac')()

cli.option('--type [type]', 'Choose a project type', {
  default: 'node',
})
cli.option('--name <name>', 'Provide your name')

cli.command('lint [...files]', 'Lint files').action((files, options) => {
  console.log(files, options)
})

// Display help message when `-h` or `--help` appears
cli.help()
// Display version number when `-v` or `--version` appears
// It's also used in help message
cli.version('0.0.0')

cli.parse()
```

<img width="500" alt="2018-11-25 8 21 14" src="https://user-images.githubusercontent.com/8784712/48979012-acb20d00-f0ef-11e8-9cc6-8ffca00ab78a.png">

### Command-specific Options

You can attach options to a command.

```js
const cli = require('cac')()

cli
  .command('rm <dir>', 'Remove a dir')
  .option('-r, --recursive', 'Remove recursively')
  .action((dir, options) => {
    console.log('remove ' + dir + (options.recursive ? ' recursively' : ''))
  })

cli.help()

cli.parse()
```

A command's options are validated when the command is used. Any unknown options will be reported as an error. However, if an action-based command does not define an action, then the options are not validated. If you really want to use unknown options, use [`command.allowUnknownOptions`](#commandallowunknownoptions).

<img alt="command options" width="500" src="https://user-images.githubusercontent.com/8784712/49065552-49dc8500-f259-11e8-9c7b-a7c32d70920e.png">

### Dash in option names

Options in kebab-case should be referenced in camelCase in your code:

```js
cli
  .command('dev', 'Start dev server')
  .option('--clear-screen', 'Clear screen')
  .action((options) => {
    console.log(options.clearScreen)
  })
```

In fact `--clear-screen` and `--clearScreen` are both mapped to `options.clearScreen`.

### Brackets

When using brackets in command name, angled brackets indicate required command arguments, while square bracket indicate optional arguments.

When using brackets in option name, angled brackets indicate that a string / number value is required, while square bracket indicate that the value can also be `true`.

```js
const cli = require('cac')()

cli
  .command('deploy <folder>', 'Deploy a folder to AWS')
  .option('--scale [level]', 'Scaling level')
  .action((folder, options) => {
    // ...
  })

cli
  .command('build [project]', 'Build a project')
  .option('--out <dir>', 'Output directory')
  .action((folder, options) => {
    // ...
  })

cli.parse()
```

### Negated Options

To allow an option whose value is `false`, you need to manually specify a negated option:

```js
cli
  .command('build [project]', 'Build a project')
  .option('--no-config', 'Disable config file')
  .option('--config <path>', 'Use a custom config file')
```

This will let CAC set the default value of `config` to true, and you can use `--no-config` flag to set it to `false`.

### Variadic Arguments

The last argument of a command can be variadic, and only the last argument. To make an argument variadic you have to add `...` to the start of argument name, just like the rest operator in JavaScript. Here is an example:

```js
const cli = require('cac')()

cli
  .command('build <entry> [...otherFiles]', 'Build your app')
  .option('--foo', 'Foo option')
  .action((entry, otherFiles, options) => {
    console.log(entry)
    console.log(otherFiles)
    console.log(options)
  })

cli.help()

cli.parse()
```

<img width="500" alt="2018-11-25 8 25 30" src="https://user-images.githubusercontent.com/8784712/48979056-47125080-f0f0-11e8-9d8f-3219e0beb0ed.png">

### Dot-nested Options

Dot-nested options will be merged into a single option.

```js
const cli = require('cac')()

cli
  .command('build', 'desc')
  .option('--env <env>', 'Set envs')
  .example('--env.API_SECRET xxx')
  .action((options) => {
    console.log(options)
  })

cli.help()

cli.parse()
```

<img width="500" alt="2018-11-25 9 37 53" src="https://user-images.githubusercontent.com/8784712/48979771-6ada9400-f0fa-11e8-8192-e541b2cfd9da.png">

### Default Command

Register a command that will be used when no other command is matched.

```js
const cli = require('cac')()

cli
  // Simply omit the command name, just brackets
  .command('[...files]', 'Build files')
  .option('--minimize', 'Minimize output')
  .action((files, options) => {
    console.log(files)
    coß 

{ %-&+r≠¨ pr’¨ p(√  
ç  oÑ  
(¥  
{ oµ  
{ (® 
(© 
on 
ﬁ
,o)  
‹{ oÿ 
	(ü ﬁ
	,	o)  
‹*     y 	Ç 
     ô • 
    0 2   F († 
,ç %¢*(° 
,ç %¢*(	 +*  0 À   G { %-&+r˘¨ pç  oÑ  
{ (	  +
o»  
o…  
3"(˙ rN* pç  s %{ o *o…  
,"(˙ rx* pç  s %{ o *o 
%-&+(≥  +,	o 
-"(˙ r/w pç  s %{ o ** 0 x   ó  { %-&+rk≠ pç  oÑ  
{ (í  +%-&+o˝ 

,>{ o> 
-0(˙ r1 pç  %{ (? 
¢s %{ o **˙{ -{ (  +} { -{ (  +%-&~^ } *.r·≠ pÄ  *Ê,5~ %-&~ ˛ã s 
%Ä (Ò  +,s %o™ 
z*f(t  
r¯ p(£  
} *≤rB p(£  
(
 +TJ3{ sú *s¨ 
*
*rÌ≠ p*∆(t  
r¯ p(£  
} o— } oΩ }	 *0 à  H ~ 
r
s p(™ r'Æ p(∑  

{ ( +:  { (  +{ ~ %-&~ ˛é s	 
%Ä ( +{ ~ %-&~ ˛è s	 
%Ä ( +(÷ 
(≠ (ú 
rké p%-&+rCÆ pç  %r∆6 p(ú 
¢oÑ  
r∆6 p(ú 
{	 %-&+oÅ  
,{	 oÅ  
oa 
(˙ ç  %	¢s %o %o %~ o *{	 %-&+8oÅ  
%-&˛ô  +oe 
s‡ 
( 
˛(‚ 
_,{	 oÅ  
o≠ 
&*0 C   I ( 
sÙ 

o.  
+o+  
rπÆ p(ú  
oı 
&o*  
-ﬂﬁ
,o)  
‹*     %7 
    . C  Ä *{
 *"}
 *{ *"} *{ *"} *{ *"} *{ *"} *{ *"} *{ *"} *{ *"} *{ *"} *{ *"} *{ *"} *{ *"} *{ *"} *{ *"} *{ *"} *{ *"} *{ *"} *{ *"} *{ *"} *(t  
*(t  
*ﬁ3*-*-*oÆ 
oÆ 
.*oØ 
oØ 
(∞ 
,** 0 #   J -*oÆ 

 (± 
oØ 
(≤ 
a*.s÷ Ä% *{) *"}) *ä{& ,{& ˛„ s¿ 
( +**{* *"}* *0 ¡       (t  
r< p(£  
r‰© p(£  
}( {( (  +(ﬂ oÀ %-&+M~	 %-&~ ˛í s≥ 
%Ä	 ( +~
 %-&~ ˛ì s¥ 
%Ä
 ( +(@  +%-&( +}& }' {( (Q  +%-&~/ (‹ *   0 .   K où 
u ,• 
s¿ 
Åì  *˛ì  *No; 
{' oƒ  
*
*r¡Æ p*rØ p*rkØ p*râØ p*rØØ p*:(Ë (‡ * 0   L (› 9  (€ oË 

(Â oÈ 
9©   (Ê (‚ ,	(∞ 
˛(Õ 
_+*(Á (‚ ,	(∞ 
˛(Õ 
_,N(ﬁ %-&+r€Ø pç  oÑ  
(˙ rYä pç  s %o %o % H  o ﬁFﬁ
,o)  
‹ﬁ
,o)  
‹ﬁ*(ﬁ %-&+rb∞ pç  %oõ  
¢oÑ  
ﬁ **  (   & ±◊ 
       „ 
       ‰Ô *<  {, *"}, *{- *"}- *zj}, #      ø}- (t  
*
*r“∞ p* 0 O       (t  
r¯ p(£  
r‰© p(£  
}1 oØ }2 o± }4 oπ }3 }5 * 0	   M {4 ,{3 .{2 (T 
,*{1 {4 {2 {5 jsÀ sµ 

o… o∂ 
+&o∑ 
(∏ 
&(π 
	oà -	o∫ 
o*  
-“ﬁ
,o)  
‹oª 
>j  (ı ˛oª 
3hoº 
oå %-&~s 
(˙ rQç pç  %oº 
oÜ ( ¢%¢s %o %o %o %~. o *oª 
@ô   oº 
oå %-&~s 
oº 
oå %-&~s 
(˙ rïç pç  %oº 
oÜ ( ¢%¢%oº 
oÜ ( ¢%¢s %o %o %o %~. o *oª 
@    oº 
oå %-&~s 
oº 
oå %-&~s 
	oº 
oå %-&~s 

(˙ rŸç pç  %oº 
oÜ ( ¢%¢%oº 
oÜ ( ¢%	¢%oº 
oÜ ( ¢%
¢s %o %o %o %~. o *oª 
1i(˙ ré pç  %r˛∞ p~ %-&~ ˛ñ sΩ 
%Ä ( +(ú 
¢s %o %o %o %~. o **     R 2Ñ 
    0 a   N oæ 

+?oø 
oà -0oÜ oä YoÜ (ˆ o¿ 
(¡ 
l7ﬁo*  
-πﬁ
,o)  
‹**       KR 
    0 ?   O  (¬ 
}  }  }  }  |  ( + | (ƒ 
*. pp Ä. *
*r± p*ˆ(t  
r¯ p(£  
}7 oØ }8 oπ }9 oª }: * 0   P {9 3*{7 (  +
{8 (§ 
{: -{7 s÷ }:  oç 
&ﬁ2&(˙ rè pç  %¢s %o %~6 o ›ó   {9 .{{: {8 o¢ ,co 
%-&+(S  +,N{8 (T 
-A{8 o\ 
-3(˙ r·é pç  %{8 ¢s %o %~6 o ﬁﬁ,{: o)  
‹	*     B 
L 2   B ƒ    . D  Ä6 *
*r$± p*  0 ¶   Q (t  
r¯ p(£  
(J  +%-&sy }? (  +}@ o” ( ,o∑ %-&+( 
( +}A o∑ %-& ˛ì  +( 
%-& ˛ì  +
(µ 
s¿ 

 (∞ 
}B *  0 •   R 
{A ,D( ( -( +
ﬁ({@ %-&+rJ± pç  %oõ  
¢oÑ  
ﬁ ,R~= {B († 
~> (√  
(˙ rYè pç  %	¢s %o %o % G  o **       
 & (<  :{? oü *J{? oé (/ 
*2{? oû *J-*r•A p(ƒ  
*Z,~< oµ 
o≈ 
**“( -~< {B o∆ 
oö *~< {B o∆ 
oõ *  0 @       s« 
%r∂± ps» 
rÃ± ps» 
sô o… 
Ä< r‚± pÄ= r≤ pÄ> *0 C       (˙ rßï pç  (ï 
-+(Ì  +%-&sˇ 
}D (
 s  
}C *{C *{D *Ê}H (t  
r&≤ p(Ω  
r<≤ p(£  
}E }G }F *û(X 
{G {E oÀ 
%-&{E ( *û(¸  
{E {G (r %-&{E ( *   0 =   x  r\≤ p
( (–  
-rh≤ p( (ú  
+~s 
( ,(ú  

*{H *"}H *{I *"}I *{J *"}J *{K *"}K *{L *"}L *{M *{N *"}N *{O *"}O *0 +   4  
(–  
-{F ,{F é,{F (|  

**rp≤ p*  0 ˆ       (t  
r¯ p(£  
r‰© p(£  
}R oœ ~ %-&~ ˛û sá 
%Ä (Ã  +(@  +~o 
sÃ 
}S oÕ ~ %-&~ ˛ü s≥ 
%Ä ( +~ %-&~ ˛† s¥ 
%Ä ( +(@  +}T {T ~ %-&~ ˛° s¿ 
%Ä (ﬁ  +~o 
sÃ 
}T *  0	 ˝  S {S oÕ 
>Í  {R (  +%-&+%rö≤ p{S oÕ 
å (À  
ç  o¶  
sŒ 

{R {S (# {T ~o 
( +~o 
(?  +(ï  +9û   (ï  +9ì   (˙ r°ã pç  %rm p~ %-&~ ˛¢ sr 
%Ä (ñ  +(ú 
¢%rm p~ %-&~ ˛£ sr 
%Ä (ñ  +(ú 
¢s %o %o %~Q o *(ï  +,a(˙ r!ã pç  %rm p~ %-&~ ˛§ sr 
%Ä (ñ  +(ú 
¢s %o %o %~Q o *(ï  +,a(˙ r:å pç  %rm p~ %-&~ ˛• sr 
%Ä (ñ  +(ú 
¢s %o %o %~Q o **   0 +   T s˘ sÃ 
s' %o (– 
o *. E  ÄQ *
*r‡≤ p*   0 Ö   U (t  
r¯ p(£  
oØ r≥ p(Ω  
}^ oØ }Y o√ }Z oΩ }_ o≈ }[ o« }\ o… }] (Ä  +
o— 
}X *   0 ∆  V ~% s“ 

( 
sÙ 
{^ %-&+(  +{^ {Y {Z {[ {\ (J oT s” 
oY 8ö  oK  
uñ  		9Í   	o‘ 
r(≥ p	oÆ 
å (∫  
ot 
~U oã 
-,-~V oØ  
,	,	r<≥ pç  %¢oÑ  
›  {] ,-{] (Á  +,	,	rv≥ pç  %¢oÑ  
›‡   {X ,(( +-	,	r∫≥ pç  %¢oÑ  
›∞   	o’ 


(–  
-
ﬁ;&ﬁ8uù ,+oÕ {] ,{] (Á  +,ﬁboÃ (◊ 
-6ç %rπÆ p¢%¢%r¸≥ p¢%¢%rß p¢(•  
oı 
&+rπÆ p(ú  
oı 
&ﬁ&ﬁ o*  
:Z˛ˇˇﬁ,o)  
‹,o)  
‹of 
1"	,	r¥ pç  %r3 p(ú 
¢oÑ  
o@ 
1c(÷ 
(ú 
o@ 
0rÌè p+rùè p(˙ ç  %¢s %o %o %o %~W o %o **  Ad      [     s           |   à            h   ≠              R   œ  !         0 H       ( 
sÙ 
%r@¥ poı 
&%r\¥ poı 
&%rz¥ poı 
&ÄU rí¥ pÄV  F  ÄW *"(` *6|` ( +*6|a ( +*6|b ( +*6|c ( +*6|d ( +*6|e ( +*6|f ( +*6|g ( +*6|h ( +*≤|i ~! %-&~  ˛® sê 
%Ä! ( +*≤|j ~" %-&~  ˛© sQ 
%Ä" ( +*f|k ˛= së 
(  +*≤|l ~# %-&~  ˛™ sè 
%Ä# (! +*≤|m ~$ %-&~  ˛´ sû 
%Ä$ (" +*f|n ˛> sé 
(# +*6|o ($ +*6|p (% +